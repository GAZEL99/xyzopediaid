<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>xyzopedia.id</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }
    body {
      background-color: #0f0f13;
      color: white;
      overflow-x: hidden;
    }
    header {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 100;
    }
    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: white;
      margin-left: 40px;
      animation: logoGlow 3s infinite alternate, bounce 2s infinite;
    }
    @keyframes logoGlow {
      0% { text-shadow: 0 0 5px rgba(100, 200, 255, 0.5); }
      100% { text-shadow: 0 0 15px rgba(100, 200, 255, 0.9); }
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    .menu {
      position: absolute;
      left: 1rem;
      font-size: 1.5rem;
      transition: all 0.3s;
      cursor: pointer;
      color: #64c8ff;
    }
    .menu:hover {
      transform: rotate(90deg) scale(1.2);
      color: #00ffcc;
    }
    .headline {
      background: linear-gradient(135deg, #1e2a4a, #2a3a6e);
      padding: 1.5rem 1rem;
      text-align: center;
      font-size: 1.3rem;
      font-weight: 600;
      border-bottom: 1px solid rgba(100, 200, 255, 0.2);
      position: relative;
      overflow: hidden;
    }
    .headline::before {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to bottom right,
        transparent 0%,
        rgba(0, 255, 204, 0.05) 50%,
        transparent 100%
      );
      transform: rotate(30deg);
      animation: shine 6s infinite;
    }
    @keyframes shine {
      0% { transform: rotate(30deg) translate(-30%, -30%); }
      100% { transform: rotate(30deg) translate(30%, 30%); }
    }
    .headline span {
      color: #00ffcc;
      animation: blink 2s infinite, neonFlicker 1.5s infinite alternate;
      position: relative;
      display: inline-block;
    }
    .headline span::after {
      content: "";
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 100%;
      height: 2px;
      background: #00ffcc;
      transform: scaleX(0);
      transform-origin: right;
      animation: underline 3s infinite;
    }
    @keyframes underline {
      0% { transform: scaleX(0); transform-origin: right; }
      50% { transform: scaleX(1); transform-origin: right; }
      51% { transform-origin: left; }
      100% { transform: scaleX(0); transform-origin: left; }
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    @keyframes neonFlicker {
      0% { text-shadow: 0 0 5px #00ffcc; }
      100% { text-shadow: 0 0 15px #00ffcc, 0 0 20px #00a2ff; }
    }
    .slideshow-container {
      width: 100%;
      height: 250px;
      position: relative;
      overflow: hidden;
      border-bottom: 1px solid rgba(100, 200, 255, 0.1);
    }
    .slideshow-track {
      display: flex;
      height: 100%;
      transition: transform 0.8s cubic-bezier(0.25, 0.1, 0.25, 1);
    }
    .slideshow-track.sliding {
      transition: transform 0.8s cubic-bezier(0.25, 0.1, 0.25, 1);
    }
    .slide {
      min-width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      position: relative;
      transition: opacity 0.5s ease;
    }
    .slide:not(:first-child) {
      opacity: 0.9;
    }
    .slide.active {
      opacity: 1;
    }
    .category-tabs {
      display: flex;
      overflow-x: auto;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      padding: 0.5rem 1rem;
      gap: 0.5rem;
      scrollbar-width: none;
    }
    .category-tabs::-webkit-scrollbar {
      display: none;
    }
    .category-tab {
      padding: 0.5rem 1rem;
      background: rgba(100, 200, 255, 0.1);
      border-radius: 20px;
      white-space: nowrap;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.9rem;
      border: 1px solid rgba(100, 200, 255, 0.2);
      position: relative;
      overflow: hidden;
    }
    .category-tab::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        135deg,
        rgba(0, 255, 204, 0) 0%,
        rgba(0, 255, 204, 0.1) 50%,
        rgba(0, 255, 204, 0) 100%
      );
      transform: translateX(-100%);
      transition: transform 0.6s ease-in-out;
    }
    .category-tab:hover::after {
      transform: translateX(100%);
    }
    .category-tab.active {
      background: linear-gradient(135deg, #00ffcc, #00a2ff);
      color: #0f0f13;
      font-weight: 600;
      box-shadow: 0 0 10px rgba(0, 255, 204, 0.5);
      transform: translateY(-2px);
    }
    .category-tab:hover {
      background: rgba(100, 200, 255, 0.3);
      transform: translateY(-2px);
    }
    /* Promo Section - Redesigned */
    .promo-section {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      padding: 2rem 1rem;
      border-bottom: 1px solid rgba(100, 200, 255, 0.1);
      position: relative;
      overflow: hidden;
      margin: 1rem 0;
    }
    .promo-section::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 20% 50%, rgba(0, 255, 204, 0.1) 0%, transparent 50%);
      pointer-events: none;
      animation: pulseBackground 8s infinite alternate;
    }
    @keyframes pulseBackground {
      0% { opacity: 0.3; }
      100% { opacity: 0.1; }
    }
    .promo-title {
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      color: #64c8ff;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .promo-title::before, .promo-title::after {
      content: "âœ¦";
      margin: 0 1rem;
      color: #00ffcc;
      animation: twinkle 1.5s infinite alternate;
    }
    @keyframes twinkle {
      0% { opacity: 0.5; transform: scale(0.8); }
      100% { opacity: 1; transform: scale(1.2); }
    }
    .promo-container {
      display: flex;
      gap: 1.5rem;
      overflow-x: auto;
      padding: 1rem 0.5rem;
      scrollbar-width: none;
      scroll-snap-type: x mandatory;
    }
    .promo-container::-webkit-scrollbar {
      display: none;
    }
    .promo-card {
      background: linear-gradient(145deg, #0066ff, #00a2ff);
      padding: 1.5rem;
      border-radius: 16px;
      min-width: 280px;
      max-width: 320px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 102, 255, 0.4);
      transition: all 0.4s ease;
      scroll-snap-align: start;
      opacity: 0;
      transform: translateY(20px) scale(0.95);
      animation: fadeInUp 0.6s forwards;
      z-index: 1;
    }
    .promo-card:nth-child(1) { animation-delay: 0.1s; }
    .promo-card:nth-child(2) { animation-delay: 0.3s; }
    .promo-card:nth-child(3) { animation-delay: 0.5s; }
    .promo-card:nth-child(4) { animation-delay: 0.7s; }
    
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    .promo-card::before {
      content: "";
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to bottom right,
        rgba(255, 255, 255, 0.15) 0%,
        rgba(255, 255, 255, 0) 60%
      );
      transform: rotate(30deg);
      animation: shine 6s infinite;
      z-index: -1;
    }
    .promo-card::after {
      content: "";
      position: absolute;
      bottom: 0;
      right: 0;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle at center, rgba(255,255,255,0.2) 0%, transparent 70%);
      border-radius: 50%;
      z-index: -1;
    }
    .promo-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 12px 30px rgba(0, 102, 255, 0.6);
    }
    .promo-card .promo-content {
      position: relative;
      z-index: 2;
    }
    .promo-card .promo-name {
      font-weight: 700;
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
      color: white;
      text-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .promo-card .promo-desc {
      font-size: 0.9rem;
      opacity: 0.9;
      margin-bottom: 1rem;
      color: rgba(255,255,255,0.9);
      line-height: 1.4;
    }
    .promo-card .promo-period {
      display: inline-block;
      background: rgba(0,0,0,0.2);
      padding: 0.3rem 0.6rem;
      border-radius: 20px;
      font-size: 0.75rem;
      margin-bottom: 1rem;
      color: rgba(255,255,255,0.8);
    }
    .promo-card .discount-badge {
      position: absolute;
      top: -10px;
      right: -10px;
      background: #ff3366;
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.2rem;
      box-shadow: 0 4px 15px rgba(255, 51, 102, 0.5);
      transform: rotate(15deg);
      animation: pulse 1.5s infinite, float 3s infinite ease-in-out;
    }
    @keyframes float {
      0%, 100% { transform: rotate(15deg) translateY(0); }
      50% { transform: rotate(15deg) translateY(-5px); }
    }
    .promo-card .discount-badge::after {
      content: "OFF";
      position: absolute;
      bottom: 5px;
      font-size: 0.6rem;
      opacity: 0.8;
    }
    .promo-card .cta-button {
      display: inline-block;
      background: white;
      color: #0066ff;
      padding: 0.6rem 1.2rem;
      border-radius: 30px;
      font-weight: 600;
      font-size: 0.9rem;
      text-decoration: none;
      transition: all 0.3s;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .promo-card .cta-button:hover {
      background: #00ffcc;
      color: #0f0f13;
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 255, 204, 0.4);
    }
    .section-title {
      padding: 1.5rem 1rem 0.5rem;
      font-size: 1.3rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      color: #64c8ff;
      position: relative;
      justify-content: center;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .section-title::before, .section-title::after {
      content: "âœ§";
      margin: 0 1rem;
      color: #00ffcc;
      animation: twinkle 1.5s infinite alternate;
    }
    .game-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1.5rem;
      padding: 1rem;
      max-width: 1000px;
      margin: 0 auto;
    }
    .game-card {
      background: linear-gradient(145deg, #1e2a4a, #2a3a6e);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s;
      border: 1px solid rgba(100, 200, 255, 0.1);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      position: relative;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.5s forwards;
    }
    .game-card:nth-child(1) { animation-delay: 0.2s; }
    .game-card:nth-child(2) { animation-delay: 0.4s; }
    .game-card:nth-child(3) { animation-delay: 0.6s; }
    .game-card:nth-child(4) { animation-delay: 0.8s; }
    .game-card:nth-child(5) { animation-delay: 1.0s; }
    .game-card:nth-child(6) { animation-delay: 1.2s; }
    .game-card:nth-child(7) { animation-delay: 1.4s; }
    .game-card:nth-child(8) { animation-delay: 1.6s; }
    .game-card:nth-child(9) { animation-delay: 1.8s; }
    .game-card:nth-child(10) { animation-delay: 2.0s; }
    .game-card:nth-child(11) { animation-delay: 2.2s; }
    
    .game-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        135deg,
        rgba(0, 255, 204, 0) 0%,
        rgba(0, 255, 204, 0.05) 50%,
        rgba(0, 255, 204, 0) 100%
      );
      transform: translateX(-100%);
      transition: transform 0.6s ease-in-out;
    }
    .game-card:hover::before {
      transform: translateX(100%);
    }
    .game-card:hover {
      border: 1px solid #00ffcc;
      transform: translateY(-5px) scale(1.03);
      box-shadow: 0 8px 20px rgba(0, 255, 204, 0.3);
    }
    .game-card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      display: block;
      border-bottom: 1px solid rgba(100, 200, 255, 0.1);
      transition: transform 0.3s;
    }
    .game-card:hover img {
      transform: scale(1.05);
    }
    .game-title {
      text-align: center;
      padding: 0.8rem 0.5rem;
      font-size: 0.9rem;
      background-color: rgba(0,0,0,0.2);
      color: #64c8ff;
      font-weight: 500;
      flex-grow: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    .game-card:hover .game-title {
      background-color: rgba(0, 255, 204, 0.1);
      color: #00ffcc;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .game-grid {
        gap: 1rem;
        padding: 1rem;
      }
      .slideshow-container {
        height: 200px;
      }
      .promo-card {
        min-width: 240px;
      }
    }
    @media (max-width: 480px) {
      .game-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 0.8rem;
        padding: 0.8rem;
      }
      .game-card img {
        height: 100px;
      }
      .slideshow-container {
        height: 150px;
      }
      .category-tab {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
      }
      .promo-title, .section-title {
        font-size: 1.1rem;
      }
      .promo-card .promo-name {
        font-size: 1.1rem;
      }
    }
    /* New styles for additional features */
    .user-section {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-right: 20px;
    }
    
    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, #00ffcc, #00a2ff);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #0f0f13;
      font-weight: bold;
      cursor: pointer;
    }
    
    .dropdown-menu {
      position: absolute;
      top: 70px;
      right: 20px;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      border-radius: 8px;
      padding: 10px 0;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      z-index: 1000;
      display: none;
      width: 200px;
    }
    
    .dropdown-menu.show {
      display: block;
    }
    
    .dropdown-item {
      padding: 10px 20px;
      color: white;
      text-decoration: none;
      display: block;
      transition: all 0.3s;
    }
    
    .dropdown-item:hover {
      background: rgba(100, 200, 255, 0.1);
      color: #00ffcc;
    }
    
    .dropdown-divider {
      border-top: 1px solid rgba(100, 200, 255, 0.2);
      margin: 5px 0;
    }
    
    .balance {
      font-size: 0.9rem;
      color: #00ffcc;
      font-weight: 600;
    }
    
    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal.show {
      display: flex;
    }
    
    .modal-content {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      border-radius: 12px;
      padding: 2rem;
      width: 90%;
      max-width: 500px;
      position: relative;
      box-shadow: 0 8px 30px rgba(0,0,0,0.4);
      animation: modalFadeIn 0.3s ease-out;
    }
    
    @keyframes modalFadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .modal-title {
      font-size: 1.3rem;
      color: #64c8ff;
      font-weight: 600;
    }
    
    .close-modal {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .close-modal:hover {
      color: #00ffcc;
      transform: rotate(90deg);
    }
    
    .form-group {
      margin-bottom: 1.2rem;
    }
    
    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      color: #64c8ff;
      font-size: 0.9rem;
    }
    
    .form-control {
      width: 100%;
      padding: 0.8rem;
      border-radius: 8px;
      border: 1px solid rgba(100, 200, 255, 0.3);
      background: rgba(0,0,0,0.3);
      color: white;
      font-family: 'Inter', sans-serif;
      transition: all 0.3s;
    }
    
    .form-control:focus {
      outline: none;
      border-color: #00ffcc;
      box-shadow: 0 0 0 2px rgba(0, 255, 204, 0.2);
    }
    
    .btn {
      display: inline-block;
      padding: 0.8rem 1.5rem;
      border-radius: 30px;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
      font-family: 'Inter', sans-serif;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #00ffcc, #00a2ff);
      color: #0f0f13;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 255, 204, 0.4);
    }
    
    .btn-block {
      display: block;
      width: 100%;
    }
    
    /* Loading spinner */
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(100, 200, 255, 0.3);
      border-radius: 50%;
      border-top-color: #00ffcc;
      animation: spin 1s ease-in-out infinite;
      margin: 20px auto;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Transaction history */
    .transaction-history {
      margin-top: 2rem;
      padding: 1rem;
    }
    
    .transaction-item {
      background: rgba(30, 42, 74, 0.5);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      border-left: 4px solid #00ffcc;
    }
    
    .transaction-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    
    .transaction-title {
      font-weight: 600;
      color: white;
    }
    
    .transaction-status {
      padding: 0.3rem 0.6rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .status-pending {
      background: rgba(255, 193, 7, 0.2);
      color: #ffc107;
    }
    
    .status-success {
      background: rgba(40, 167, 69, 0.2);
      color: #28a745;
    }
    
    .status-failed {
      background: rgba(220, 53, 69, 0.2);
      color: #dc3545;
    }
    
    .transaction-details {
      font-size: 0.85rem;
      color: rgba(255,255,255,0.8);
    }
    
    .transaction-date {
      font-size: 0.75rem;
      color: rgba(100, 200, 255, 0.6);
      margin-top: 0.5rem;
    }
    
    /* Product detail modal */
    .product-detail {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }
    
    .product-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
    }
    
    .product-title {
      font-size: 1.5rem;
      color: white;
      margin-bottom: 0.5rem;
    }
    
    .product-description {
      color: rgba(255,255,255,0.8);
      line-height: 1.6;
    }
    
    .price-options {
      margin-top: 1.5rem;
    }
    
    .price-option {
      background: rgba(30, 42, 74, 0.7);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      cursor: pointer;
      transition: all 0.3s;
      border: 1px solid transparent;
    }
    
    .price-option:hover {
      border-color: #00ffcc;
      background: rgba(30, 42, 74, 0.9);
    }
    
    .price-option.selected {
      border-color: #00ffcc;
      background: rgba(0, 255, 204, 0.1);
    }
    
    .price-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    
    .price-name {
      font-weight: 600;
      color: white;
    }
    
    .price-amount {
      font-weight: 700;
      color: #00ffcc;
    }
    
    .price-promo {
      text-decoration: line-through;
      color: rgba(255,255,255,0.5);
      margin-right: 0.5rem;
    }
    
    .price-duration {
      font-size: 0.85rem;
      color: rgba(100, 200, 255, 0.8);
    }
    
    /* Payment methods */
    .payment-methods {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      margin: 1.5rem 0;
    }
    
    .payment-method {
      flex: 1 0 calc(33.333% - 0.8rem);
      min-width: 100px;
      background: rgba(30, 42, 74, 0.7);
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      border: 1px solid transparent;
    }
    
    .payment-method:hover {
      border-color: #00ffcc;
    }
    
    .payment-method.selected {
      border-color: #00ffcc;
      background: rgba(0, 255, 204, 0.1);
    }
    
    .payment-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: #64c8ff;
    }
    
    .payment-name {
      font-size: 0.85rem;
      color: white;
    }
    
    /* Login/Register Modal */
    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .auth-switch {
      text-align: center;
      margin-top: 1rem;
      color: rgba(255,255,255,0.7);
    }
    
    .auth-switch a {
      color: #00ffcc;
      text-decoration: none;
      cursor: pointer;
    }
    
    .auth-switch a:hover {
      text-decoration: underline;
    }
    
    /* Search bar */
    .search-container {
      padding: 1rem;
      display: flex;
      justify-content: center;
    }
    
    .search-bar {
      display: flex;
      max-width: 600px;
      width: 100%;
    }
    
    .search-input {
      flex: 1;
      padding: 0.8rem 1rem;
      border-radius: 30px 0 0 30px;
      border: 1px solid rgba(100, 200, 255, 0.3);
      background: rgba(0,0,0,0.3);
      color: white;
      font-family: 'Inter', sans-serif;
      transition: all 0.3s;
    }
    
    .search-input:focus {
      outline: none;
      border-color: #00ffcc;
      box-shadow: 0 0 0 2px rgba(0, 255, 204, 0.2);
    }
    
    .search-button {
      padding: 0 1.5rem;
      border-radius: 0 30px 30px 0;
      border: none;
      background: linear-gradient(135deg, #00ffcc, #00a2ff);
      color: #0f0f13;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .search-button:hover {
      background: linear-gradient(135deg, #00a2ff, #00ffcc);
    }
    
    /* Order confirmation */
    .order-confirmation {
      text-align: center;
      padding: 2rem 0;
    }
    
    .confirmation-icon {
      font-size: 4rem;
      color: #00ffcc;
      margin-bottom: 1.5rem;
    }
    
    .confirmation-title {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: white;
    }
    
    .confirmation-details {
      background: rgba(30, 42, 74, 0.5);
      border-radius: 8px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      text-align: left;
    }
    
    .confirmation-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.8rem;
    }
    
    .confirmation-label {
      color: rgba(255,255,255,0.7);
    }
    
    .confirmation-value {
      color: white;
      font-weight: 500;
    }
    
    .confirmation-total {
      font-size: 1.2rem;
      color: #00ffcc;
      font-weight: 600;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(100, 200, 255, 0.2);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .payment-method {
        flex: 1 0 calc(50% - 0.8rem);
      }
      
      .modal-content {
        padding: 1.5rem;
      }
    }
    
    @media (max-width: 480px) {
      .payment-method {
        flex: 1 0 100%;
      }
      
      .modal-content {
        padding: 1rem;
        width: 95%;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="menu">â˜°</div>
    <div class="logo">xyzo<span style="color:#00ffcc">pedia</span>.id</div>
    <div class="user-section">
      <div class="balance">Rp <span id="user-balance">0</span></div>
      <div class="user-avatar" id="user-avatar">U</div>
    </div>
    <div class="dropdown-menu" id="dropdown-menu">
      <a href="#" class="dropdown-item" id="profile-link"><i class="fas fa-user"></i> Profil</a>
      <a href="#" class="dropdown-item" id="deposit-link"><i class="fas fa-wallet"></i> Deposit</a>
      <a href="#" class="dropdown-item" id="history-link"><i class="fas fa-history"></i> Riwayat</a>
      <div class="dropdown-divider"></div>
      <a href="#" class="dropdown-item" id="logout-link"><i class="fas fa-sign-out-alt"></i> Keluar</a>
    </div>
  </header>
  
  <div class="headline">
    Top Up Game <span>Murah</span> & Cepat
  </div>
  
  <div class="slideshow-container">
    <div class="slideshow-track">
      <div class="slide" style="background-image: url('https://files.catbox.moe/fq69ro.jpg')"></div>
      <div class="slide" style="background-image: url('https://files.catbox.moe/fq69ro.jpg')"></div>
      <div class="slide" style="background-image: url('https://files.catbox.moe/fq69ro.jpg')"></div>
    </div>
  </div>
  
  <section class="promo-section">
    <div class="promo-title">Promo Eksklusif</div>
    <div class="promo-container">
      <div class="promo-card">
        <div class="discount-badge">70%</div>
        <div class="promo-content">
          <div class="promo-name">New Member Bonus</div>
          <div class="promo-desc">Dapatkan diskon khusus untuk member baru dengan minimal pembelian Rp50.000</div>
          <div class="promo-period">Berlaku hingga 31 Desember 2023</div>
          <a href="#" class="cta-button">Dapatkan Sekarang</a>
        </div>
      </div>
      <div class="promo-card">
        <div class="discount-badge">50%</div>
        <div class="promo-content">
          <div class="promo-name">Midnight Sale</div>
          <div class="promo-desc">Diskon spesial setiap hari pukul 00:00 - 02:00 untuk semua produk</div>
          <div class="promo-period">Setiap Hari</div>
          <a href="#" class="cta-button">Lihat Detail</a>
        </div>
      </div>
      <div class="promo-card">
        <div class="discount-badge">30%</div>
        <div class="promo-content">
          <div class="promo-name">Weekend Special</div>
          <div class="promo-desc">Nikmati diskon weekend untuk pembelian paket premium dan game</div>
          <div class="promo-period">Sabtu & Minggu</div>
          <a href="#" class="cta-button">Beli Sekarang</a>
        </div>
      </div>
      <div class="promo-card">
        <div class="discount-badge">20%</div>
        <div class="promo-content">
          <div class="promo-name">Cashback Reward</div>
          <div class="promo-desc">Dapatkan cashback 20% untuk pembelian berikutnya minimal Rp100.000</div>
          <div class="promo-period">Berlaku 1x per user</div>
          <a href="#" class="cta-button">Klaim Reward</a>
        </div>
      </div>
    </div>
  </section>
  
  <div class="search-container">
    <div class="search-bar">
      <input type="text" class="search-input" id="search-input" placeholder="Cari produk...">
      <button class="search-button" id="search-button"><i class="fas fa-search"></i></button>
    </div>
  </div>
  
  <div class="category-tabs">
    <div class="category-tab active">Semua</div>
    <div class="category-tab">Streaming</div>
    <div class="category-tab">Musik</div>
    <div class="category-tab">Produktivitas</div>
    <div class="category-tab">Sosial Media</div>
    <div class="category-tab">Lainnya</div>
  </div>
  
  <div class="section-title">Pilih Produk</div>
  
  <section class="game-grid" id="product-grid">
    <!-- Products will be loaded dynamically -->
  </section>

  <!-- Login Modal -->
  <div class="modal" id="login-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Masuk ke Akun Anda</h3>
        <button class="close-modal" id="close-login-modal">&times;</button>
      </div>
      <form id="login-form" class="auth-form">
        <div class="form-group">
          <label class="form-label" for="login-email">Email</label>
          <input type="email" class="form-control" id="login-email" placeholder="Masukkan email Anda" required>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="login-password">Password</label>
          <input type="password" class="form-control" id="login-password" placeholder="Masukkan password Anda" required>
        </div>
        
        <button type="submit" class="btn btn-primary btn-block">Masuk</button>
        
        <div class="auth-switch">
          Belum punya akun? <a href="#" id="show-register">Daftar disini</a>
        </div>
      </form>
    </div>
  </div>

  <!-- Register Modal -->
  <div class="modal" id="register-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Buat Akun Baru</h3>
        <button class="close-modal" id="close-register-modal">&times;</button>
      </div>
      <form id="register-form" class="auth-form">
        <div class="form-group">
          <label class="form-label" for="register-name">Nama Lengkap</label>
          <input type="text" class="form-control" id="register-name" placeholder="Masukkan nama lengkap Anda" required>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="register-email">Email</label>
          <input type="email" class="form-control" id="register-email" placeholder="Masukkan email Anda" required>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="register-password">Password</label>
          <input type="password" class="form-control" id="register-password" placeholder="Buat password (minimal 6 karakter)" required>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="register-confirm-password">Konfirmasi Password</label>
          <input type="password" class="form-control" id="register-confirm-password" placeholder="Ulangi password Anda" required>
        </div>
        
        <button type="submit" class="btn btn-primary btn-block">Daftar</button>
        
        <div class="auth-switch">
          Sudah punya akun? <a href="#" id="show-login">Masuk disini</a>
        </div>
      </form>
    </div>
  </div>

  <!-- Product Detail Modal -->
  <div class="modal" id="product-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Detail Produk</h3>
        <button class="close-modal" id="close-product-modal">&times;</button>
      </div>
      <div class="product-detail" id="product-detail">
        <!-- Product details will be loaded here -->
      </div>
    </div>
  </div>

  <!-- Deposit Modal -->
  <div class="modal" id="deposit-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Deposit Saldo</h3>
        <button class="close-modal" id="close-deposit-modal">&times;</button>
      </div>
      <form id="deposit-form">
        <div class="form-group">
          <label class="form-label" for="deposit-amount">Jumlah Deposit</label>
          <input type="number" class="form-control" id="deposit-amount" placeholder="Masukkan jumlah deposit" required>
        </div>
        
        <div class="form-group">
          <label class="form-label">Metode Pembayaran</label>
          <div class="payment-methods">
            <div class="payment-method" data-method="bank-transfer">
              <div class="payment-icon"><i class="fas fa-university"></i></div>
              <div class="payment-name">Transfer Bank</div>
            </div>
            <div class="payment-method" data-method="e-wallet">
              <div class="payment-icon"><i class="fas fa-wallet"></i></div>
              <div class="payment-name">E-Wallet</div>
            </div>
            <div class="payment-method" data-method="virtual-account">
              <div class="payment-icon"><i class="fas fa-credit-card"></i></div>
              <div class="payment-name">Virtual Account</div>
            </div>
            <input type="hidden" id="payment-method" name="payment-method" required>
          </div>
        </div>
        
        <button type="submit" class="btn btn-primary btn-block">Deposit Sekarang</button>
      </form>
    </div>
  </div>

  <!-- Transaction History Modal -->
  <div class="modal" id="history-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Riwayat Transaksi</h3>
        <button class="close-modal" id="close-history-modal">&times;</button>
      </div>
      <div class="transaction-history" id="transaction-history">
        <!-- Transactions will be loaded here -->
        <div class="spinner" id="history-spinner"></div>
      </div>
    </div>
  </div>

  <!-- Order Confirmation Modal -->
  <div class="modal" id="confirmation-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Konfirmasi Pesanan</h3>
        <button class="close-modal" id="close-confirmation-modal">&times;</button>
      </div>
      <div class="order-confirmation" id="order-confirmation">
        <!-- Order confirmation will be loaded here -->
      </div>
    </div>
  </div>

  <!-- Loading Modal -->
  <div class="modal" id="loading-modal">
    <div class="modal-content" style="text-align: center; max-width: 300px;">
      <div class="spinner"></div>
      <p id="loading-text">Memproses...</p>
    </div>
  </div>

  <script>
    // API Configuration
    const API_BASE_URL = 'https://velzz.shop/api';
    const API_KEY = 'VS-1f4cbf530c94e7';
    const API_ID = 'aec30a2a';
    
    // User data
    let currentUser = null;
    let authToken = null;
    
    // DOM Elements
    const userAvatar = document.getElementById('user-avatar');
    const dropdownMenu = document.getElementById('dropdown-menu');
    const userBalance = document.getElementById('user-balance');
    const productGrid = document.getElementById('product-grid');
    const productModal = document.getElementById('product-modal');
    const productDetail = document.getElementById('product-detail');
    const closeProductModal = document.getElementById('close-product-modal');
    const depositModal = document.getElementById('deposit-modal');
    const closeDepositModal = document.getElementById('close-deposit-modal');
    const depositForm = document.getElementById('deposit-form');
    const depositAmount = document.getElementById('deposit-amount');
    const paymentMethods = document.querySelectorAll('.payment-method');
    const paymentMethodInput = document.getElementById('payment-method');
    const historyModal = document.getElementById('history-modal');
    const closeHistoryModal = document.getElementById('close-history-modal');
    const transactionHistory = document.getElementById('transaction-history');
    const historySpinner = document.getElementById('history-spinner');
    const loadingModal = document.getElementById('loading-modal');
    const loadingText = document.getElementById('loading-text');
    const profileLink = document.getElementById('profile-link');
    const depositLink = document.getElementById('deposit-link');
    const historyLink = document.getElementById('history-link');
    const logoutLink = document.getElementById('logout-link');
    const categoryTabs = document.querySelectorAll('.category-tab');
    const searchInput = document.getElementById('search-input');
    const searchButton = document.getElementById('search-button');
    const loginModal = document.getElementById('login-modal');
    const closeLoginModal = document.getElementById('close-login-modal');
    const loginForm = document.getElementById('login-form');
    const registerModal = document.getElementById('register-modal');
    const closeRegisterModal = document.getElementById('close-register-modal');
    const registerForm = document.getElementById('register-form');
    const showRegisterLink = document.getElementById('show-register');
    const showLoginLink = document.getElementById('show-login');
    const confirmationModal = document.getElementById('confirmation-modal');
    const closeConfirmationModal = document.getElementById('close-confirmation-modal');
    const orderConfirmation = document.getElementById('order-confirmation');
    
    // Initialize the app
    document.addEventListener('DOMContentLoaded', function() {
      // Check if user is logged in
      checkAuthStatus();
      
      // Load products
      loadProducts();
      
      // Event listeners
      userAvatar.addEventListener('click', toggleDropdown);
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.user-section') && dropdownMenu.classList.contains('show')) {
          dropdownMenu.classList.remove('show');
        }
      });
      
      // Modal close buttons
      closeProductModal.addEventListener('click', () => productModal.classList.remove('show'));
      closeDepositModal.addEventListener('click', () => depositModal.classList.remove('show'));
      closeHistoryModal.addEventListener('click', () => historyModal.classList.remove('show'));
      closeLoginModal.addEventListener('click', () => loginModal.classList.remove('show'));
      closeRegisterModal.addEventListener('click', () => registerModal.classList.remove('show'));
      closeConfirmationModal.addEventListener('click', () => confirmationModal.classList.remove('show'));
      
      // Click outside modal to close
      window.addEventListener('click', function(e) {
        if (e.target === productModal) productModal.classList.remove('show');
        if (e.target === depositModal) depositModal.classList.remove('show');
        if (e.target === historyModal) historyModal.classList.remove('show');
        if (e.target === loginModal) loginModal.classList.remove('show');
        if (e.target === registerModal) registerModal.classList.remove('show');
        if (e.target === confirmationModal) confirmationModal.classList.remove('show');
      });
      
      // Payment method selection
      paymentMethods.forEach(method => {
        method.addEventListener('click', function() {
          paymentMethods.forEach(m => m.classList.remove('selected'));
          this.classList.add('selected');
          paymentMethodInput.value = this.dataset.method;
        });
      });
      
      // Deposit form submission
      depositForm.addEventListener('submit', function(e) {
        e.preventDefault();
        processDeposit();
      });
      
      // Menu links
      depositLink.addEventListener('click', function(e) {
        e.preventDefault();
        dropdownMenu.classList.remove('show');
        
        if (!currentUser) {
          showLoginModal();
          return;
        }
        
        depositModal.classList.add('show');
      });
      
      historyLink.addEventListener('click', function(e) {
        e.preventDefault();
        dropdownMenu.classList.remove('show');
        
        if (!currentUser) {
          showLoginModal();
          return;
        }
        
        historyModal.classList.add('show');
        loadTransactionHistory();
      });
      
      profileLink.addEventListener('click', function(e) {
        e.preventDefault();
        dropdownMenu.classList.remove('show');
        
        if (!currentUser) {
          showLoginModal();
          return;
        }
        
        alert('Fitur profil akan segera tersedia!');
      });
      
      logoutLink.addEventListener('click', function(e) {
        e.preventDefault();
        logoutUser();
      });
      
      // Category tabs
      categoryTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          categoryTabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          filterProducts(this.textContent.trim());
        });
      });
      
      // Search functionality
      searchButton.addEventListener('click', searchProducts);
      searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          searchProducts();
        }
      });
      
      // Auth forms
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        loginUser();
      });
      
      registerForm.addEventListener('submit', function(e) {
        e.preventDefault();
        registerUser();
      });
      
      // Auth modal switches
      showRegisterLink.addEventListener('click', function(e) {
        e.preventDefault();
        loginModal.classList.remove('show');
        registerModal.classList.add('show');
      });
      
      showLoginLink.addEventListener('click', function(e) {
        e.preventDefault();
        registerModal.classList.remove('show');
        loginModal.classList.add('show');
      });
      
      // Initialize slideshow
      initSlideshow();
    });
    
    // Check authentication status
    function checkAuthStatus() {
      const token = localStorage.getItem('authToken');
      const userData = localStorage.getItem('userData');
      
      if (token && userData) {
        authToken = token;
        currentUser = JSON.parse(userData);
        updateUserDisplay();
      } else {
        showLoginModal();
      }
    }
    
    // Show login modal
    function showLoginModal() {
      loginModal.classList.add('show');
    }
    
    // Login user
    async function loginUser() {
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      
      try {
        showLoading('Sedang masuk...');
        
        const response = await fetch(`${API_BASE_URL}/auth/login`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'x-api-key': API_KEY
          },
          body: JSON.stringify({
            email,
            password
          })
        });
        
        if (!response.ok) throw new Error('Login gagal');
        
        const { success, data } = await response.json();
        
        if (!success || !data) throw new Error('Data login tidak valid');
        
        // Save token and user data
        authToken = data.token;
        currentUser = data.user;
        
        localStorage.setItem('authToken', authToken);
        localStorage.setItem('userData', JSON.stringify(currentUser));
        
        updateUserDisplay();
        loginModal.classList.remove('show');
        loginForm.reset();
        
        alert('Login berhasil!');
      } catch (error) {
        console.error('Login error:', error);
        alert('Login gagal: ' + error.message);
      } finally {
        hideLoading();
      }
    }
    
    // Register user
    async function registerUser() {
      const name = document.getElementById('register-name').value;
      const email = document.getElementById('register-email').value;
      const password = document.getElementById('register-password').value;
      const confirmPassword = document.getElementById('register-confirm-password').value;
      
      if (password !== confirmPassword) {
        alert('Password dan konfirmasi password tidak cocok!');
        return;
      }
      
      try {
        showLoading('Mendaftarkan akun...');
        
        const response = await fetch(`${API_BASE_URL}/auth/register`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'x-api-key': API_KEY
          },
          body: JSON.stringify({
            name,
            email,
            password
          })
        });
        
        if (!response.ok) throw new Error('Registrasi gagal');
        
        const { success, data } = await response.json();
        
        if (!success || !data) throw new Error('Data registrasi tidak valid');
        
        // Save token and user data
        authToken = data.token;
        currentUser = data.user;
        
        localStorage.setItem('authToken', authToken);
        localStorage.setItem('userData', JSON.stringify(currentUser));
        
        updateUserDisplay();
        registerModal.classList.remove('show');
        registerForm.reset();
        
        alert('Registrasi berhasil! Anda telah login.');
      } catch (error) {
        console.error('Registration error:', error);
        alert('Registrasi gagal: ' + error.message);
      } finally {
        hideLoading();
      }
    }
    
    // Logout user
    function logoutUser() {
      localStorage.removeItem('authToken');
      localStorage.removeItem('userData');
      currentUser = null;
      authToken = null;
      
      updateUserDisplay();
      dropdownMenu.classList.remove('show');
      
      // Show login modal
      showLoginModal();
    }
    
    // Toggle dropdown menu
    function toggleDropdown() {
      if (!currentUser) {
        showLoginModal();
        return;
      }
      dropdownMenu.classList.toggle('show');
    }
    
    // Update user display
    function updateUserDisplay() {
      if (currentUser) {
        userBalance.textContent = formatCurrency(currentUser.balance || 0);
        userAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
        userBalance.parentElement.style.display = 'block';
      } else {
        userBalance.parentElement.style.display = 'none';
        userAvatar.textContent = '?';
      }
    }
    
    // Format currency
    function formatCurrency(amount) {
      return new Intl.NumberFormat('id-ID', {
        style: 'decimal',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(amount);
    }
    
    // Load products from API
    async function loadProducts() {
      try {
        showLoading('Memuat produk...');
        
        const response = await fetch(`${API_BASE_URL}/layanan`, {
          headers: {
            'x-api-key': API_KEY
          }
        });
        
        if (!response.ok) throw new Error('Gagal memuat produk');
        
        const { success, data } = await response.json();
        
        if (success && data) {
          renderProducts(data);
        } else {
          throw new Error('Data produk tidak valid');
        }
      } catch (error) {
        console.error('Error loading products:', error);
        productGrid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: #ff6b6b;">Gagal memuat produk. Silakan coba lagi.</p>';
      } finally {
        hideLoading();
      }
    }
    
    // Search products
    function searchProducts() {
      const searchTerm = searchInput.value.trim().toLowerCase();
      
      if (!searchTerm) {
        // If search is empty, show all products
        const products = document.querySelectorAll('.game-card');
        products.forEach(product => {
          product.style.display = 'flex';
        });
        return;
      }
      
      const products = document.querySelectorAll('.game-card');
      products.forEach(product => {
        const productName = product.querySelector('.game-title').textContent.toLowerCase();
        if (productName.includes(searchTerm)) {
          product.style.display = 'flex';
        } else {
          product.style.display = 'none';
        }
      });
    }
    
    // Render products to the grid
    function renderProducts(products) {
      productGrid.innerHTML = '';
      
      products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'game-card';
        productCard.innerHTML = `
          <img src="${product.gambar}" alt="${product.nama}" loading="lazy">
          <div class="game-title">${product.nama}</div>
        `;
        
        productCard.addEventListener('click', () => {
          if (!currentUser) {
            showLoginModal();
            return;
          }
          openProductDetail(product);
        });
        productGrid.appendChild(productCard);
      });
      
      // Trigger animations
      setTimeout(() => {
        const cards = document.querySelectorAll('.game-card');
        cards.forEach((card, index) => {
          card.style.animationDelay = `${index * 0.1}s`;
        });
      }, 100);
    }
    
    // Filter products by category
    function filterProducts(category) {
      const products = document.querySelectorAll('.game-card');
      
      products.forEach(product => {
        const productName = product.querySelector('.game-title').textContent.trim();
        let showProduct = false;
        
        if (category === 'Semua') {
          showProduct = true;
        } else if (category === 'Streaming' && isStreaming(productName)) {
          showProduct = true;
        } else if (category === 'Musik' && isMusic(productName)) {
          showProduct = true;
        } else if (category === 'Produktivitas' && isProductivity(productName)) {
          showProduct = true;
        } else if (category === 'Sosial Media' && isSocialMedia(productName)) {
          showProduct = true;
        } else if (category === 'Lainnya') {
          showProduct = !isStreaming(productName) && !isMusic(productName) &&
                        !isProductivity(productName) && !isSocialMedia(productName);
        }
        
        product.style.display = showProduct ? 'flex' : 'none';
      });
    }
    
    // Helper functions to categorize products
    function isStreaming(name) {
      const streamingApps = ['Netflix', 'Bstation', 'Youtube', 'Wetv', 'Viu', 'Vision+', 'Vidio Premier', 'IQIYI', 'Rcti+', 'Disney Hotstar'];
      return streamingApps.some(app => name.includes(app));
    }
    
    function isMusic(name) {
      const musicApps = ['Spotify'];
      return musicApps.some(app => name.includes(app));
    }
    
    function isProductivity(name) {
      const productivityApps = ['Capcut', 'Canva', 'Chatgpt'];
      return productivityApps.some(app => name.includes(app));
    }
    
    function isSocialMedia(name) {
      const socialMedia = ['Getcontact'];
      return socialMedia.some(app => name.includes(app));
    }
    
    // Open product detail modal
    async function openProductDetail(product) {
      try {
        showLoading('Memuat detail produk...');
        
        const response = await fetch(`${API_BASE_URL}/list-harga?layananId=${product._id}`, {
          headers: {
            'x-api-key': API_KEY,
            'Authorization': `Bearer ${authToken}`
          }
        });
        
        if (!response.ok) throw new Error('Gagal memuat harga produk');
        
        const { success, data: prices } = await response.json();
        
        if (!success || !prices) throw new Error('Data harga tidak valid');
        
        // Render product detail
        productDetail.innerHTML = `
          <img src="${product.gambar}" alt="${product.nama}" class="product-image">
          <div>
            <h2 class="product-title">${product.nama}</h2>
            <p class="product-description">${product.deskripsi || 'Tidak ada deskripsi tersedia.'}</p>
          </div>
          <div class="price-options">
            <h3 style="color: #64c8ff; margin-bottom: 1rem;">Pilih Paket</h3>
            ${prices.map(price => `
              <div class="price-option" data-price-id="${price._id}">
                <div class="price-header">
                  <span class="price-name">${price.namaPaket}</span>
                  <span class="price-amount">
                    ${price.hargaPromo ? `<span class="price-promo">Rp${formatCurrency(price.harga)}</span>` : ''}
                    Rp${formatCurrency(price.hargaPromo || price.harga)}
                  </span>
                </div>
                <div class="price-duration">${price.durasi}</div>
              </div>
            `).join('')}
          </div>
          <button class="btn btn-primary btn-block" id="buy-button">Beli Sekarang</button>
        `;
        
        // Add event listeners to price options
        const priceOptions = productDetail.querySelectorAll('.price-option');
        priceOptions.forEach(option => {
          option.addEventListener('click', function() {
            priceOptions.forEach(opt => opt.classList.remove('selected'));
            this.classList.add('selected');
          });
        });
        
        // Add event listener to buy button
        const buyButton = productDetail.querySelector('#buy-button');
        buyButton.addEventListener('click', function() {
          const selectedOption = productDetail.querySelector('.price-option.selected');
          if (!selectedOption) {
            alert('Silakan pilih paket terlebih dahulu!');
            return;
          }
          
          const priceId = selectedOption.dataset.priceId;
          const selectedPrice = prices.find(p => p._id === priceId);
          
          showOrderConfirmation(product, selectedPrice);
        });
        
        productModal.classList.add('show');
      } catch (error) {
        console.error('Error loading product detail:', error);
        productDetail.innerHTML = '<p style="text-align: center; color: #ff6b6b;">Gagal memuat detail produk. Silakan coba lagi.</p>';
        productModal.classList.add('show');
      } finally {
        hideLoading();
      }
    }
    
    // Show order confirmation
    function showOrderConfirmation(product, price) {
      const totalPrice = price.hargaPromo || price.harga;
      
      orderConfirmation.innerHTML = `
        <div class="confirmation-icon">
          <i class="fas fa-shopping-cart"></i>
        </div>
        <h3 class="confirmation-title">Konfirmasi Pesanan</h3>
        
        <div class="confirmation-details">
          <div class="confirmation-row">
            <span class="confirmation-label">Produk:</span>
            <span class="confirmation-value">${product.nama}</span>
          </div>
          <div class="confirmation-row">
            <span class="confirmation-label">Paket:</span>
            <span class="confirmation-value">${price.namaPaket}</span>
          </div>
          <div class="confirmation-row">
            <span class="confirmation-label">Durasi:</span>
            <span class="confirmation-value">${price.durasi}</span>
          </div>
          <div class="confirmation-row">
            <span class="confirmation-label">Harga:</span>
            <span class="confirmation-value">Rp${formatCurrency(totalPrice)}</span>
          </div>
          <div class="confirmation-total">
            Total: Rp${formatCurrency(totalPrice)}
          </div>
        </div>
        
        <button class="btn btn-primary" id="confirm-order-button">Konfirmasi & Bayar</button>
      `;
      
      const confirmButton = orderConfirmation.querySelector('#confirm-order-button');
      confirmButton.addEventListener('click', () => {
        processOrder(product, price);
      });
      
      productModal.classList.remove('show');
      confirmationModal.classList.add('show');
    }
    
    // Process order
    async function processOrder(product, price) {
      try {
        showLoading('Memproses pesanan...');
        
        const response = await fetch(`${API_BASE_URL}/transaksi/create`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'x-api-key': API_KEY,
            'Authorization': `Bearer ${authToken}`
          },
          body: JSON.stringify({
            userId: currentUser._id,
            layananId: product._id,
            hargaId: price._id,
            jumlah: 1,
            metodePembayaran: 'saldo'
          })
        });
        
        if (!response.ok) throw new Error('Gagal membuat transaksi');
        
        const { success, data: transaction } = await response.json();
        
        if (!success || !transaction) throw new Error('Transaksi tidak valid');
        
        // Update user balance
        currentUser.balance -= price.hargaPromo || price.harga;
        localStorage.setItem('userData', JSON.stringify(currentUser));
        updateUserDisplay();
        
        // Show success message
        confirmationModal.classList.remove('show');
        alert(`Pembelian ${product.nama} (${price.namaPaket}) berhasil!`);
      } catch (error) {
        console.error('Error processing order:', error);
        alert('Gagal memproses pesanan: ' + error.message);
      } finally {
        hideLoading();
      }
    }
    
    // Process deposit
    async function processDeposit() {
      const amount = parseFloat(depositAmount.value);
      const method = paymentMethodInput.value;
      
      if (!amount || amount <= 0) {
        alert('Masukkan jumlah deposit yang valid');
        return;
      }
      
      if (!method) {
        alert('Pilih metode pembayaran');
        return;
      }
      
      try {
        showLoading('Memproses deposit...');
        
        const response = await fetch(`${API_BASE_URL}/deposit/create`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'x-api-key': API_KEY,
            'Authorization': `Bearer ${authToken}`
          },
          body: JSON.stringify({
            userId: currentUser._id,
            jumlah: amount,
            metodePembayaran: method
          })
        });
        
        if (!response.ok) throw new Error('Gagal membuat deposit');
        
        const { success, data: deposit } = await response.json();
        
        if (!success || !deposit) throw new Error('Deposit tidak valid');
        
        // In a real app, you would show payment instructions
        // For now, we'll just update the balance
        currentUser.balance += amount;
        localStorage.setItem('userData', JSON.stringify(currentUser));
        updateUserDisplay();
        
        alert(`Deposit Rp${formatCurrency(amount)} berhasil!`);
        depositModal.classList.remove('show');
        depositForm.reset();
        paymentMethods.forEach(m => m.classList.remove('selected'));
        paymentMethodInput.value = '';
      } catch (error) {
        console.error('Error processing deposit:', error);
        alert('Gagal memproses deposit: ' + error.message);
      } finally {
        hideLoading();
      }
    }
    
    // Load transaction history
    async function loadTransactionHistory() {
      try {
        historySpinner.style.display = 'block';
        transactionHistory.innerHTML = '';
        
        const response = await fetch(`${API_BASE_URL}/transaksi?userId=${currentUser._id}`, {
          headers: {
            'x-api-key': API_KEY,
            'Authorization': `Bearer ${authToken}`
          }
        });
        
        if (!response.ok) throw new Error('Gagal memuat riwayat transaksi');
        
        const { success, data: transactions } = await response.json();
        
        if (!success || !transactions) throw new Error('Data transaksi tidak valid');
        
        if (transactions.length === 0) {
          transactionHistory.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.7);">Tidak ada riwayat transaksi.</p>';
          return;
        }
        
        // Render transactions
        transactions.forEach(transaction => {
          const transactionItem = document.createElement('div');
          transactionItem.className = 'transaction-item';
          
          let statusClass = 'status-pending';
          if (transaction.status === 'success') statusClass = 'status-success';
          else if (transaction.status === 'failed') statusClass = 'status-failed';
          
          transactionItem.innerHTML = `
            <div class="transaction-header">
              <div class="transaction-title">${transaction.layananId.nama} - ${transaction.hargaId.namaPaket}</div>
              <div class="transaction-status ${statusClass}">${transaction.status === 'success' ? 'Sukses' : 
                transaction.status === 'failed' ? 'Gagal' : 'Pending'}</div>
            </div>
            <div class="transaction-details">
              Jumlah: ${transaction.jumlah} x Rp${formatCurrency(transaction.hargaId.hargaPromo || transaction.hargaId.harga)} = 
              Rp${formatCurrency(transaction.totalHarga)}
            </div>
            <div class="transaction-date">
              ${new Date(transaction.tanggalTransaksi).toLocaleString('id-ID')}
            </div>
          `;
          
          transactionHistory.appendChild(transactionItem);
        });
      } catch (error) {
        console.error('Error loading transaction history:', error);
        transactionHistory.innerHTML = '<p style="text-align: center; color: #ff6b6b;">Gagal memuat riwayat transaksi. Silakan coba lagi.</p>';
      } finally {
        historySpinner.style.display = 'none';
      }
    }
    
    // Initialize slideshow
    function initSlideshow() {
      const slideshowTrack = document.querySelector('.slideshow-track');
      const slides = document.querySelectorAll('.slide');
      const slideCount = slides.length;
      let currentIndex = 0;
      let isAnimating = false;
      let autoplayInterval;
      
      function nextSlide() {
        if (isAnimating) return;
        isAnimating = true;
        
        currentIndex = (currentIndex + 1) % slideCount;
        
        slideshowTrack.classList.add('sliding');
        slideshowTrack.style.transform = `translateX(-${currentIndex * 100}%)`;
        
        setTimeout(() => {
          slideshowTrack.classList.remove('sliding');
          if (currentIndex === slideCount - 1) {
            slideshowTrack.style.transition = 'none';
            slideshowTrack.style.transform = 'translateX(0)';
            void slideshowTrack.offsetWidth;
            slideshowTrack.style.transition = '';
            currentIndex = 0;
          }
          isAnimating = false;
        }, 800);
      }
      
      function startAutoplay() {
        autoplayInterval = setInterval(nextSlide, 3000);
      }
      
      slideshowTrack.addEventListener('mouseenter', () => {
        clearInterval(autoplayInterval);
      });
      
      slideshowTrack.addEventListener('mouseleave', startAutoplay);
      
      startAutoplay();
    }
    
    // Show loading modal
    function showLoading(message = 'Memproses...') {
      loadingText.textContent = message;
      loadingModal.classList.add('show');
    }
    
    // Hide loading modal
    function hideLoading() {
      loadingModal.classList.remove('show');
    }
  </script>
</body>
</html>